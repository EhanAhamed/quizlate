<form action="/search" method="get" class="searchbar">
    <i class="searchbar-icon nf nf-fa-search"></i>
    <eta> if (data.searchQuery) { </eta>
    <input type="text" name="q" id="searchbar-input" placeholder="Search" autocomplete="off" autocapitalize="off" spellcheck="false" value="<eta>= data.searchQuery </eta>"/>
    <eta> } else { </eta>
    <input type="text" name="q" id="searchbar-input" placeholder="Search" autocomplete="off" autocapitalize="off" spellcheck="false"/>
    <eta> } </eta>
</form>
<script>
    document.getElementById("searchbar-input").addEventListener(
        "input",
        function (event) {
            if (event.target.value.length > 0 && event.target.value.length < 50) {
                fetch(
                    "<eta>= data.apiUrl </eta>/public/search/query-predictions?q=" + encodeURIComponent(event.target.value)
                ).then(function (response) {
                    response.json().then(function (responseJson) {
                        if (responseJson.data) {
                            console.log(responseJson.data.rows);
                        }
                    }).catch(function (error) {
                        console.error(error);
                    })
                }).catch(function (error) {
                    console.error(error);
                })
            }
        }
    )
</script>
